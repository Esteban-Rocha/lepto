!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getBoundingClientRect(),n=t.top,i=t.left,o=window,r=o.pageYOffset,s=o.pageXOffset;return{top:n+r,left:i+s}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)};var i={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"easeInOutQuad";e=Math.round(e),t=Math.round(t);var o=Date.now(),r=o+t,s=document.documentElement.scrollTop||window.scrollY,a=e-s,d=document.documentElement.scrollTop||window.scrollY;window.requestAnimationFrame(function e(){var t=Date.now(),u=function(e,t,o){return i[n]((o-e)/(t-e))}(o,r,t),l=Math.round(s+a*u);window.scrollTo(window.scrollX,l),t>=r||(document.documentElement.scrollTop||window.scrollY)===d&&(document.documentElement.scrollTop||window.scrollY)!==l||(d=document.documentElement.scrollTop||window.scrollY,window.requestAnimationFrame(e))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.pageX,i=t.pageY,o=(0,r.default)(e),s=o.left,a=o.top,d=e.offsetWidth,u=e.offsetHeight;return n>=s&&n<=s+d&&i>=a&&i<=a+u};var i,o=n(0),r=(i=o)&&i.__esModule?i:{default:i};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.nextSibling;return t.parentNode.insertBefore(e,n)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=a(n(0)),r=a(n(3)),s=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props={height:150,width:150,backgroundColor:"#fff",borderColor:"#eee",borderRadius:75,borderWidth:2},this.el="string"==typeof t?document.querySelector(t):t,this.lens=document.createElement("div"),this.lens.className="magnifier",this.lens.style.position="absolute",this.lens.style.backgroundRepeat="no-repeat",this.lens.style.borderStyle="solid",this.lens.style.overflow="hidden",this.lens.style.visibility="hidden",this.lens.style.boxShadow="0 1px 5px rgba(0, 0, 0, .25)",this.handleLoad=this.handleLoad.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),Object.keys(this.props).forEach(function(e){return n.setStyle(e,n.props[e])}),(0,r.default)(this.lens,this.el),this.show(),this.calcImageSize(),this.bind()}return i(e,[{key:"calcImageSize",value:function(){var e=document.createElement("img");e.style.position="absolute",e.style.width="auto",e.style.visibility="hidden",e.src=this.el.src,e.onload=this.handleLoad,this.lens.appendChild(e)}},{key:"bind",value:function(){return this.el.addEventListener("mousemove",this.handleTouchMove,!1),this.el.addEventListener("mouseleave",this.handleTouchEnd,!1),this.el.addEventListener("touchstart",this.handleTouchMove,!1),this.el.addEventListener("touchmove",this.handleTouchMove,!1),this.el.addEventListener("touchend",this.handleTouchEnd,!1),this.lens.addEventListener("mousemove",this.handleTouchMove,!1),this.lens.addEventListener("mouseleave",this.handleTouchEnd,!1),this.lens.addEventListener("touchmove",this.handleTouchMove,!1),this.lens.addEventListener("touchend",this.handleTouchEnd,!1),this}},{key:"unbind",value:function(){return this.el.removeEventListener("mousemove",this.handleTouchMove,!1),this.el.removeEventListener("mouseleave",this.handleTouchEnd,!1),this.el.removeEventListener("touchstart",this.handleTouchMove,!1),this.el.removeEventListener("touchmove",this.handleTouchMove,!1),this.el.removeEventListener("touchend",this.handleTouchEnd,!1),this.lens.removeEventListener("mousemove",this.handleTouchMove,!1),this.lens.removeEventListener("mouseleave",this.handleTouchEnd,!1),this.lens.removeEventListener("touchmove",this.handleTouchMove,!1),this.lens.removeEventListener("touchend",this.handleTouchEnd,!1),this}},{key:"handleLoad",value:function(){var e=this.lens.getElementsByTagName("img")[0];this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight,this.hide(),this.lens.style.visibility="visible",this.lens.style.backgroundImage="url("+this.el.src+")",this.lens.removeChild(e)}},{key:"handleTouchMove",value:function(e){e.preventDefault();var t=0===e.type.indexOf("touch")?e.changedTouches[0]:e;if((0,s.default)(this.el,t)){this.show();var n=t.pageX,i=t.pageY,r=(0,o.default)(this.el),a=r.left,d=r.top,u=this.el,l=u.offsetLeft,A=u.offsetTop,c=u.offsetWidth,h=u.offsetHeight,m=this.props,f=m.width,v=m.height,p=m.borderWidth,E=(a-n)*(this.imageWidth/c)+(f/2-p),g=(d-i)*(this.imageHeight/h)+(v/2-p),y=n-f/2-(a!==l?a-l:0),L=i-v/2-(d!==A?d-A:0);this.lens.style.left=y+"px",this.lens.style.top=L+"px",this.lens.style.backgroundPosition=E+"px "+g+"px"}else this.hide()}},{key:"handleTouchEnd",value:function(){this.hide()}},{key:"height",value:function(e){return this.setProp("height",e)}},{key:"width",value:function(e){return this.setProp("width",e)}},{key:"backgroundColor",value:function(e){return this.setProp("backgroundColor",e)}},{key:"borderColor",value:function(e){return this.setProp("borderColor",e)}},{key:"borderRadius",value:function(e){return this.setProp("borderRadius",e)}},{key:"borderWidth",value:function(e){return this.setProp("borderWidth",e)}},{key:"setProp",value:function(e,t){return this.props[e]=t,this.setStyle(e,t),this}},{key:"setStyle",value:function(e,t){this.lens.style[e]="number"==typeof t?t+"px":t}},{key:"className",value:function(e){return this.lens.className=e,this}},{key:"show",value:function(){return this.lens.style.display="block",this}},{key:"hide",value:function(){return this.lens.style.display="none",this}},{key:"destroy",value:function(){this.unbind(),this.lens.remove()}}]),e}();t.default=d,e.exports=t.default},function(e,t,n){!function(){"use strict";"undefined"!=typeof document&&function(e){var t;function n(){t||(t=!0,e())}"complete"===document.readyState?e():(t=!1,document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1))}(function(){var e=!0,t=!1,n=null,i={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function o(e){return!(!e||e===document||"HTML"===e.nodeName||"BODY"===e.nodeName)}function r(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function s(t){e=!1}function a(){document.addEventListener("mousemove",d),document.addEventListener("mousedown",d),document.addEventListener("mouseup",d),document.addEventListener("pointermove",d),document.addEventListener("pointerdown",d),document.addEventListener("pointerup",d),document.addEventListener("touchmove",d),document.addEventListener("touchstart",d),document.addEventListener("touchend",d)}function d(t){"html"!==t.target.nodeName.toLowerCase()&&(e=!1,document.removeEventListener("mousemove",d),document.removeEventListener("mousedown",d),document.removeEventListener("mouseup",d),document.removeEventListener("pointermove",d),document.removeEventListener("pointerdown",d),document.removeEventListener("pointerup",d),document.removeEventListener("touchmove",d),document.removeEventListener("touchstart",d),document.removeEventListener("touchend",d))}document.addEventListener("keydown",function(t){o(document.activeElement)&&r(document.activeElement),e=!0},!0),document.addEventListener("mousedown",s,!0),document.addEventListener("pointerdown",s,!0),document.addEventListener("touchstart",s,!0),document.addEventListener("focus",function(t){var n,s,a;o(t.target)&&((e||(n=t.target,s=n.type,"INPUT"==(a=n.tagName)&&i[s]&&!n.readonly||"TEXTAREA"==a&&!n.readonly||"true"==n.contentEditable))&&(r(t.target),e=!1))},!0),document.addEventListener("blur",function(e){var i;o(e.target)&&(e.target.classList.contains("focus-visible")&&(t=!0,window.clearTimeout(n),n=window.setTimeout(function(){t=!1,window.clearTimeout(n)},100),(i=e.target).hasAttribute("data-focus-visible-added")&&(i.classList.remove("focus-visible"),i.removeAttribute("data-focus-visible-added"))))},!0),document.addEventListener("visibilitychange",function(n){"hidden"==document.visibilityState&&(t&&(e=!0),a())},!0),a(),document.body.classList.add("js-focus-visible")})}()},function(e,t,n){"use strict";r(n(5));var i=r(n(4)),o=r(n(1));function r(e){return e&&e.__esModule?e:{default:e}}var s,a,d=void 0,u=void 0,l=void 0,A=void 0,c=void 0,h=void 0,m=void 0,f=void 0,v=void 0,p=void 0,E=void 0,g=function(e){e.addEventListener("paste",function(e){e.preventDefault();var t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)})},y=function(e,t){return function(n){"string"==typeof d.filters[e].use[t]?d.filters[e].use[t]=n.target.value:d.filters[e].use[t].name=n.target.value}},L=function(e,t){return function(n){"string"==typeof d.filters[e].use[t]&&(d.filters[e].use[t]={name:d.filters[e].use[t]});var i=null;try{i=JSON.parse("{"+n.target.innerText+"}")}catch(e){n.target.classList.add("--error")}i&&(n.target.classList.remove("--error"),d.filters[e].use[t]=Object.assign({},{name:d.filters[e].use[t].name},i))}},b=function(e,t,n){var i=void 0;if("function"!=typeof e){i="string"==typeof e?{name:e}:Object.assign({},e);var o=document.createElement("div");o.className="filters__use__item";var r=document.createElement("span");r.tabIndex=0,r.className="filters__use__cross",r.addEventListener("click",B(t,n)),r.addEventListener("keypress",B(t,n)),o.appendChild(r);var s=document.createElement("input");s.value=i.name,s.setAttribute("spellcheck",!1),s.addEventListener("keyup",y(t,n)),s.addEventListener("keypress",y(t,n)),o.appendChild(s),delete i.name;var a=document.createElement("pre");if(g(a),a.className="filters__use__data",a.setAttribute("contenteditable",!0),a.setAttribute("spellcheck",!1),a.addEventListener("keyup",L(t,n)),a.addEventListener("keypress",L(t,n)),Object.keys(i).length){var d=JSON.stringify(i,null,2);d=(d=d.substring(2,d.length-1)).split(/\n/).map(function(e){return e.replace(/^  /,"")}).join("\n"),a.innerHTML=d}return o.appendChild(a),o}},C=function(e){return function(t){var n=function(e){var t=[],n=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var a=r.value;""!==a&&t.push(a)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return t}(t.target.innerText.split("\n"));1===n.length&&(n=n[0]),d.filters[e].glob=n}},w=function(e){return function(t){var n=void 0;"keypress"===t.type?13===t.keyCode&&(n=!0):n=!0,n&&(d.filters.splice(e,1),I())}},M=function(e,t){return function(n){var i=void 0;"keypress"===n.type?13===n.keyCode&&(i=!0):i=!0,i&&(d.filters.splice(e+t,0,d.filters.splice(e,1)[0]),I())}},k=function(e){return function(t){var n=void 0;"keypress"===t.type?13===t.keyCode&&(n=!0):n=!0,n&&(d.filters[e].use.push({name:""}),I())}},B=function(e,t){return function(n){var i=void 0;"keypress"===n.type?13===n.keyCode&&(i=!0):i=!0,i&&(d.filters[e].use.splice(t,1),I())}},I=function(){for(var e in l.value=d.input,A.value=d.output,l.addEventListener("keyup",function(e){d.input=e.target.value}),A.addEventListener("keyup",function(e){d.output=e.target.value}),f.innerHTML="",d.filters){e=parseInt(e);var t=d.filters[e],n=document.createElement("div");n.className="filters__item";var i=document.createElement("div");if(i.className="filters__move",0!==e){var o=document.createElement("div");o.tabIndex=0,o.className="filters__move__up",o.addEventListener("click",M(e,-1)),o.addEventListener("keypress",M(e,-1)),i.appendChild(o)}var r=document.createElement("div");if(r.tabIndex=0,r.className="filters__move__cross",r.addEventListener("click",w(e)),r.addEventListener("keypress",w(e)),i.appendChild(r),e!==d.filters[e].length){var s=document.createElement("div");s.tabIndex=0,s.className="filters__move__down",s.addEventListener("click",M(e,1)),s.addEventListener("keypress",M(e,1)),i.appendChild(s)}n.appendChild(i);var a=document.createElement("div");a.className="filters__globs";var u=document.createElement("div");u.className="filters__globs__title",u.innerHTML="globs:",a.appendChild(u);var c=document.createElement("pre");g(c),c.className="filters__globs__content",c.setAttribute("contenteditable",!0),c.setAttribute("spellcheck",!1),c.addEventListener("keyup",C(e)),c.addEventListener("keypress",C(e)),Array.isArray(t.glob)?c.innerHTML=t.glob.join("\n"):c.innerHTML=t.glob,a.appendChild(c),n.appendChild(a);var h=document.createElement("div");for(var m in h.className="filters__use",t.use)h.appendChild(b(t.use[m],e,m));var v=document.createElement("button");v.className="btn btn--invisible",v.innerHTML="Add a plugin",v.addEventListener("click",k(e)),v.addEventListener("keypress",k(e)),h.appendChild(v),n.appendChild(h),f.appendChild(n)}},Q=function e(t,n){return n.length>1?e(t[n[0]].children,n.splice(1,n.length)):t[n[0]]},T=function(e,t,n){console.log("setQuality",e,t,n);var i=document.getElementById("sizeDiff");if(console.log(i),i){i.innerHTML="";var o=document.createElement("img");o.className="loader",o.src="data:image/gif;base64,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",i.appendChild(o)}t.src=n+"?q="+e+"&"+Math.random()},D=void 0,_=function(){D&&D.destroy(),D=new i.default("#result-img").width(500).height(500).borderRadius(250).backgroundColor("#0D0D0D").className("img__magnifier")},S=function(e){var t,n,i=void 0;"keypress"===e.type?13===e.keyCode&&(i=!0):i=!0,i&&(t=Q(u,E.split(",").map(function(e){return parseInt(e)})),n=t.path.substring(t.path.lastIndexOf(".")+1,t.path.length).toLowerCase(),-1!==["png","jpg","jpeg","gif"].indexOf(n)&&("jpg"===n||"jpeg"===n?d.filters.push({glob:t.path,use:[{name:"lepto.jpeg",quality:parseInt(document.getElementById("q-range").value)}]}):"png"===n?d.filters.push({glob:t.path,use:[{name:"lepto.png",quality:parseInt(document.getElementById("q-range").value)}]}):"gif"===n&&d.filters.push({glob:t.path,use:[{name:"lepto.gif",colors:parseInt(document.getElementById("q-range").value)}]})),I(),(0,o.default)(Math.max(0,window.scrollY-300),300),e.target.classList.add("btn--disabled"),setTimeout(function(){e.target.classList.remove("btn--disabled")},1e3))},x=function(e){var t=Q(u,(E=e).split(",").map(function(e){return parseInt(e)})),n=t.path.substring(t.path.lastIndexOf(".")+1,t.path.length).toLowerCase();if(v.innerHTML="",-1!==["png","jpg","jpeg","gif"].indexOf(n)){var i=document.createElement("h2");i.className="title",i.innerHTML=t.name,v.appendChild(i);var r=document.createElement("span");r.innerHTML="Quality: ",v.appendChild(r);var s=document.createElement("span"),a=document.createElement("input");a.type="range",a.className="range",a.id="q-range","jpg"===n||"jpeg"===n?(a.min=1,a.max=100,a.value=80,s.innerHTML=a.value,v.appendChild(a)):"png"===n?(a.min=0,a.max=100,a.value=80,s.innerHTML=a.value,v.appendChild(a)):"gif"===n&&(r.innerHTML="Colors: ",a.min=2,a.max=256,a.value=256,s.innerHTML=a.value,v.appendChild(a)),r.appendChild(s);var d=document.createElement("span");d.id="sizeDiff",d.className="size-diff",v.appendChild(d);var l=document.createElement("button");l.className="btn",l.innerHTML="Add optimization plugin",v.appendChild(l),l.addEventListener("click",S),l.addEventListener("keypress",S);var A=document.createElement("div");A.className="img";var c=document.createElement("img");c.id="result-img",c.addEventListener("load",_),A.appendChild(c),v.appendChild(A),T(a.value,c,"ressources/"+t.path),a.addEventListener("change",function(e,n,i){return function(i){e.innerHTML=i.target.value,T(i.target.value,n,"ressources/"+t.path)}}(s,c,t.path)),(0,o.default)(v.offsetTop,200);var h=document.querySelectorAll("[data-file-id]"),m=!0,f=!1,p=void 0;try{for(var g,y=h[Symbol.iterator]();!(m=(g=y.next()).done);m=!0){var L=g.value;L.getAttribute("data-file-id")===E?L.classList.add("tree__item--selected"):L.classList.remove("tree__item--selected")}}catch(e){f=!0,p=e}finally{try{!m&&y.return&&y.return()}finally{if(f)throw p}}}},F=function(e){return function(t){console.log(t,t.type,t.keyCode),"keypress"===t.type?13===t.keyCode&&x(e):x(e)}},O=function(){m.innerHTML="";var e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=[];for(var o in t){var r=t[o],s=document.createElement("div");s.className="tree__item",s.setAttribute("data-file-id",n+o),"file"===r.type&&(s.tabIndex=0,s.addEventListener("click",F(n+o)),s.addEventListener("keypress",F(n+o)));var a=document.createElement("h3");if(a.className="title",a.innerHTML=r.name+("directory"===r.type?"/":""),s.appendChild(a),r.children){var d=e(r.children,n+o+","),u=!0,l=!1,A=void 0;try{for(var c,h=d[Symbol.iterator]();!(u=(c=h.next()).done);u=!0){var m=c.value;s.appendChild(m)}}catch(e){l=!0,A=e}finally{try{!u&&h.return&&h.return()}finally{if(l)throw A}}}i.push(s)}return i}(u),t=!0,n=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value;m.appendChild(s)}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}},J=void 0,R=void 0,Y=function(){J=Date.now(),c.classList.add("btn--disabled"),p&&p.emit("update-config",d)},N=function(e){"keypress"===e.type?13===e.keyCode&&Y():Y()},H=function(e){var t=void 0;"keypress"===e.type?13===e.keyCode&&(t=!0):t=!0,t&&(d.filters.push({glob:""}),I())},z=function(){l=document.getElementById("config.input"),A=document.getElementById("config.output"),c=document.getElementById("saveConfigBtn"),h=document.getElementById("addFilterBtn"),m=document.querySelector(".tree"),f=document.querySelector(".filters"),v=document.getElementById("selectedFile"),c.addEventListener("click",N),c.addEventListener("keypress",N),h.addEventListener("click",H),h.addEventListener("keypress",H);var e=document.createElement("script");e.onload=function(){(p=io.connect(location.protocol+"//"+location.hostname+":"+(parseInt(location.port)+1))).on("config-update",function(e){d=e,E=null,null,I()}),p.on("tree-update",function(e){u=e,O()}),p.on("size-diff",function(e){var t=document.getElementById("sizeDiff");t&&(t.innerHTML=e)}),p.on("update-finish",function(){R&&clearTimeout(R);var e=Math.max(0,100-Date.now()+J);e?R=setTimeout(function(){c.classList.remove("btn--disabled")},e):c.classList.remove("btn--disabled")})},e.src=location.protocol+"//"+location.hostname+":"+(parseInt(location.port)+1)+"/socket.io/socket.io.js",document.body.appendChild(e),window.addEventListener("keydown",function(e){(115==e.which&&e.ctrlKey||83==e.which&&e.metaKey)&&(e.preventDefault(),Y())})};s=void 0,a=function(){s||(s=!0,z())},["interactive","complete"].indexOf(document.readyState)>=0?z():(s=!1,document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1))}]);