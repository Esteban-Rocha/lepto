!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getBoundingClientRect(),n=t.top,i=t.left,o=window,r=o.pageYOffset,a=o.pageXOffset;return{top:n+r,left:i+a}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)};var i={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"easeInOutQuad";e=Math.round(e),t=Math.round(t);var o=Date.now(),r=o+t,a=document.documentElement.scrollTop||window.scrollY,s=e-a,u=document.documentElement.scrollTop||window.scrollY;window.requestAnimationFrame(function e(){var t=Date.now(),d=function(e,t,o){return i[n]((o-e)/(t-e))}(o,r,t),l=Math.round(a+s*d);window.scrollTo(window.scrollX,l),t>=r||(document.documentElement.scrollTop||window.scrollY)===u&&(document.documentElement.scrollTop||window.scrollY)!==l||(u=document.documentElement.scrollTop||window.scrollY,window.requestAnimationFrame(e))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.pageX,i=t.pageY,o=(0,r.default)(e),a=o.left,s=o.top,u=e.offsetWidth,d=e.offsetHeight;return n>=a&&n<=a+u&&i>=s&&i<=s+d};var i,o=n(0),r=(i=o)&&i.__esModule?i:{default:i};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.nextSibling;return t.parentNode.insertBefore(e,n)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=s(n(0)),r=s(n(3)),a=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props={height:150,width:150,backgroundColor:"#fff",borderColor:"#eee",borderRadius:75,borderWidth:2},this.el="string"==typeof t?document.querySelector(t):t,this.lens=document.createElement("div"),this.lens.className="magnifier",this.lens.style.position="absolute",this.lens.style.backgroundRepeat="no-repeat",this.lens.style.borderStyle="solid",this.lens.style.overflow="hidden",this.lens.style.visibility="hidden",this.lens.style.boxShadow="0 1px 5px rgba(0, 0, 0, .25)",this.handleLoad=this.handleLoad.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),Object.keys(this.props).forEach(function(e){return n.setStyle(e,n.props[e])}),(0,r.default)(this.lens,this.el),this.show(),this.calcImageSize(),this.bind()}return i(e,[{key:"calcImageSize",value:function(){var e=document.createElement("img");e.style.position="absolute",e.style.width="auto",e.style.visibility="hidden",e.src=this.el.src,e.onload=this.handleLoad,this.lens.appendChild(e)}},{key:"bind",value:function(){return this.el.addEventListener("mousemove",this.handleTouchMove,!1),this.el.addEventListener("mouseleave",this.handleTouchEnd,!1),this.el.addEventListener("touchstart",this.handleTouchMove,!1),this.el.addEventListener("touchmove",this.handleTouchMove,!1),this.el.addEventListener("touchend",this.handleTouchEnd,!1),this.lens.addEventListener("mousemove",this.handleTouchMove,!1),this.lens.addEventListener("mouseleave",this.handleTouchEnd,!1),this.lens.addEventListener("touchmove",this.handleTouchMove,!1),this.lens.addEventListener("touchend",this.handleTouchEnd,!1),this}},{key:"unbind",value:function(){return this.el.removeEventListener("mousemove",this.handleTouchMove,!1),this.el.removeEventListener("mouseleave",this.handleTouchEnd,!1),this.el.removeEventListener("touchstart",this.handleTouchMove,!1),this.el.removeEventListener("touchmove",this.handleTouchMove,!1),this.el.removeEventListener("touchend",this.handleTouchEnd,!1),this.lens.removeEventListener("mousemove",this.handleTouchMove,!1),this.lens.removeEventListener("mouseleave",this.handleTouchEnd,!1),this.lens.removeEventListener("touchmove",this.handleTouchMove,!1),this.lens.removeEventListener("touchend",this.handleTouchEnd,!1),this}},{key:"handleLoad",value:function(){var e=this.lens.getElementsByTagName("img")[0];this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight,this.hide(),this.lens.style.visibility="visible",this.lens.style.backgroundImage="url("+this.el.src+")",this.lens.removeChild(e)}},{key:"handleTouchMove",value:function(e){e.preventDefault();var t=0===e.type.indexOf("touch")?e.changedTouches[0]:e;if((0,a.default)(this.el,t)){this.show();var n=t.pageX,i=t.pageY,r=(0,o.default)(this.el),s=r.left,u=r.top,d=this.el,l=d.offsetLeft,c=d.offsetTop,h=d.offsetWidth,v=d.offsetHeight,m=this.props,f=m.width,p=m.height,y=m.borderWidth,g=(s-n)*(this.imageWidth/h)+(f/2-y),b=(u-i)*(this.imageHeight/v)+(p/2-y),E=n-f/2-(s!==l?s-l:0),L=i-p/2-(u!==c?u-c:0);this.lens.style.left=E+"px",this.lens.style.top=L+"px",this.lens.style.backgroundPosition=g+"px "+b+"px"}else this.hide()}},{key:"handleTouchEnd",value:function(){this.hide()}},{key:"height",value:function(e){return this.setProp("height",e)}},{key:"width",value:function(e){return this.setProp("width",e)}},{key:"backgroundColor",value:function(e){return this.setProp("backgroundColor",e)}},{key:"borderColor",value:function(e){return this.setProp("borderColor",e)}},{key:"borderRadius",value:function(e){return this.setProp("borderRadius",e)}},{key:"borderWidth",value:function(e){return this.setProp("borderWidth",e)}},{key:"setProp",value:function(e,t){return this.props[e]=t,this.setStyle(e,t),this}},{key:"setStyle",value:function(e,t){this.lens.style[e]="number"==typeof t?t+"px":t}},{key:"className",value:function(e){return this.lens.className=e,this}},{key:"show",value:function(){return this.lens.style.display="block",this}},{key:"hide",value:function(){return this.lens.style.display="none",this}},{key:"destroy",value:function(){this.unbind(),this.lens.remove()}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){!function(){"use strict";"undefined"!=typeof document&&function(e){var t;function n(){t||(t=!0,e())}"complete"===document.readyState?e():(t=!1,document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1))}(function(){var e=!0,t=!1,n=null,i={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function o(e){return!(!e||e===document||"HTML"===e.nodeName||"BODY"===e.nodeName)}function r(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function a(t){e=!1}function s(){document.addEventListener("mousemove",u),document.addEventListener("mousedown",u),document.addEventListener("mouseup",u),document.addEventListener("pointermove",u),document.addEventListener("pointerdown",u),document.addEventListener("pointerup",u),document.addEventListener("touchmove",u),document.addEventListener("touchstart",u),document.addEventListener("touchend",u)}function u(t){"html"!==t.target.nodeName.toLowerCase()&&(e=!1,document.removeEventListener("mousemove",u),document.removeEventListener("mousedown",u),document.removeEventListener("mouseup",u),document.removeEventListener("pointermove",u),document.removeEventListener("pointerdown",u),document.removeEventListener("pointerup",u),document.removeEventListener("touchmove",u),document.removeEventListener("touchstart",u),document.removeEventListener("touchend",u))}document.addEventListener("keydown",function(t){o(document.activeElement)&&r(document.activeElement),e=!0},!0),document.addEventListener("mousedown",a,!0),document.addEventListener("pointerdown",a,!0),document.addEventListener("touchstart",a,!0),document.addEventListener("focus",function(t){var n,a,s;o(t.target)&&((e||(n=t.target,a=n.type,"INPUT"==(s=n.tagName)&&i[a]&&!n.readonly||"TEXTAREA"==s&&!n.readonly||"true"==n.contentEditable))&&(r(t.target),e=!1))},!0),document.addEventListener("blur",function(e){var i;o(e.target)&&(e.target.classList.contains("focus-visible")&&(t=!0,window.clearTimeout(n),n=window.setTimeout(function(){t=!1,window.clearTimeout(n)},100),(i=e.target).hasAttribute("data-focus-visible-added")&&(i.classList.remove("focus-visible"),i.removeAttribute("data-focus-visible-added"))))},!0),document.addEventListener("visibilitychange",function(n){"hidden"==document.visibilityState&&(t&&(e=!0),s())},!0),s(),document.body.classList.add("js-focus-visible")})}()},function(e,t,n){"use strict";r(n(5));var i=r(n(4)),o=r(n(1));function r(e){return e&&e.__esModule?e:{default:e}}var a,s,u=void 0,d=void 0,l=void 0,c=void 0,h=void 0,v=void 0,m=void 0,f=void 0,p=void 0,y=void 0,g=function(e){e.addEventListener("paste",function(e){e.preventDefault();var t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)})},b=function(e,t){return function(n){"string"==typeof u.filters[e].use[t]?u.filters[e].use[t]=n.target.value:u.filters[e].use[t].name=n.target.value}},E=function(e,t){return function(n){"string"==typeof u.filters[e].use[t]&&(u.filters[e].use[t]={name:u.filters[e].use[t]});var i=null;try{i=JSON.parse("{"+n.target.innerText+"}")}catch(e){n.target.classList.add("--error")}i&&(n.target.classList.remove("--error"),u.filters[e].use[t]=Object.assign({},{name:u.filters[e].use[t].name},i))}},L=function(e,t,n){var i=void 0;if("function"!=typeof e){i="string"==typeof e?{name:e}:Object.assign({},e);var o=document.createElement("div");o.className="filters__use__item";var r=document.createElement("input");r.value=i.name,r.setAttribute("spellcheck",!1),r.addEventListener("keyup",b(t,n)),r.addEventListener("keypress",b(t,n)),o.appendChild(r),delete i.name;var a=document.createElement("pre");if(g(a),a.className="filters__use__data",a.setAttribute("contenteditable",!0),a.setAttribute("spellcheck",!1),a.addEventListener("keyup",E(t,n)),a.addEventListener("keypress",E(t,n)),Object.keys(i).length){var s=JSON.stringify(i,null,2);s=(s=s.substring(2,s.length-1)).split(/\n/).map(function(e){return e.replace(/^  /,"")}).join("\n"),a.innerHTML=s}return o.appendChild(a),o}},w=function(e){return function(t){var n=function(e){var t=[],n=!0,i=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;""!==s&&t.push(s)}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return t}(t.target.innerText.split("\n"));1===n.length&&(n=n[0]),u.filters[e].glob=n}},T=function(){for(var e in l.value=u.input,c.value=u.output,l.addEventListener("keyup",function(e){u.input=e.target.value}),c.addEventListener("keyup",function(e){u.output=e.target.value}),m.innerHTML="",u.filters){var t=u.filters[e],n=document.createElement("div");n.className="filters__item";var i=document.createElement("div");i.className="filters__globs";var o=document.createElement("div");o.className="filters__globs__title",o.innerHTML="globs:",i.appendChild(o);var r=document.createElement("pre");g(r),r.className="filters__globs__content",r.setAttribute("contenteditable",!0),r.setAttribute("spellcheck",!1),r.addEventListener("keyup",w(e)),r.addEventListener("keypress",w(e)),Array.isArray(t.glob)?r.innerHTML=t.glob.join("\n"):r.innerHTML=t.glob,i.appendChild(r),n.appendChild(i);var a=document.createElement("div");for(var s in a.className="filters__use",t.use)a.appendChild(L(t.use[s],e,s));n.appendChild(a),m.appendChild(n)}},k=function e(t,n){return n.length>1?e(t[n[0]].children,n.splice(1,n.length)):t[n[0]]},_=void 0,M=function(){_&&_.destroy(),_=new i.default("#result-img").width(500).height(500).borderRadius(250).backgroundColor("#0D0D0D").className("img__magnifier")},C=function(){var e=k(d,y.split(",").map(function(e){return parseInt(e)})),t=e.path.substring(e.path.lastIndexOf(".")+1,e.path.length).toLowerCase();-1!==["png","jpg","jpeg","gif"].indexOf(t)&&("jpg"!==t&&"jpeg"!==t||u.filters.push({glob:e.path,use:[{name:"lepto.jpeg",quality:parseInt(document.getElementById("q-range").value)}]})),T(),(0,o.default)(0,300)},O=function(e){"keypress"===e.type?13===e.keyCode&&(C(),e.target.classList.add("btn--disabled"),setTimeout(function(){e.target.classList.remove("btn--disabled")},1e3)):(C(),e.target.classList.add("btn--disabled"),setTimeout(function(){e.target.classList.remove("btn--disabled")},1e3))},x=function(e){var t=k(d,(y=e).split(",").map(function(e){return parseInt(e)})),n=t.path.substring(t.path.lastIndexOf(".")+1,t.path.length).toLowerCase();if(f.innerHTML="",-1!==["png","jpg","jpeg","gif"].indexOf(n)){var i=document.createElement("h2");i.className="title",i.innerHTML=t.name,f.appendChild(i);var r=document.createElement("span");r.innerHTML="Quality: ",f.appendChild(r);var a=document.createElement("span");r.appendChild(a);var s=document.createElement("input");"jpg"!==n&&"jpeg"!==n||(s.type="range",s.id="q-range",s.className="range",s.min=1,s.max=100,s.value=80,a.innerHTML=s.value,f.appendChild(s));var u=document.createElement("button");u.className="btn",u.innerHTML="Add optimization plugin",f.appendChild(u),u.addEventListener("click",O),u.addEventListener("keypress",O);var l=document.createElement("div");l.className="img";var c=document.createElement("img");c.id="result-img",c.addEventListener("load",M),c.src="ressources/"+t.path,l.appendChild(c),f.appendChild(l),s.addEventListener("change",function(e,n,i){return function(i){e.innerHTML=i.target.value,function(e,t,n){t.src=n+"?q="+e}(i.target.value,n,"ressources/"+t.path)}}(a,c,t.path)),(0,o.default)(f.offsetTop,200);var h=document.querySelectorAll("[data-file-id]"),v=!0,m=!1,p=void 0;try{for(var g,b=h[Symbol.iterator]();!(v=(g=b.next()).done);v=!0){var E=g.value;E.getAttribute("data-file-id")===y?E.classList.add("tree__item--selected"):E.classList.remove("tree__item--selected")}}catch(e){m=!0,p=e}finally{try{!v&&b.return&&b.return()}finally{if(m)throw p}}}},j=function(){v.innerHTML="";var e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=[];for(var o in t){var r=t[o],a=document.createElement("div");a.className="tree__item",a.setAttribute("data-file-id",n+o),"file"===r.type&&(a.tabIndex=0,a.addEventListener("click",x.bind(null,n+o)));var s=document.createElement("h3");if(s.className="title",s.innerHTML=r.name+("directory"===r.type?"/":""),a.appendChild(s),r.children){var u=e(r.children,n+o+","),d=!0,l=!1,c=void 0;try{for(var h,v=u[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value;a.appendChild(m)}}catch(e){l=!0,c=e}finally{try{!d&&v.return&&v.return()}finally{if(l)throw c}}}i.push(a)}return i}(d),t=!0,n=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;v.appendChild(a)}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}},A=void 0,I=void 0,N=function(){A=Date.now(),h.classList.add("btn--disabled"),p&&p.emit("update-config",u)},S=function(e){"keypress"===e.type?13===e.keyCode&&N():N()},H=function(){l=document.getElementById("config.input"),c=document.getElementById("config.output"),h=document.getElementById("save-config-btn"),v=document.querySelector(".tree"),m=document.querySelector(".filters"),f=document.getElementById("selectedFile"),h.addEventListener("click",S),h.addEventListener("keypress",S);var e=document.createElement("script");e.onload=function(){(p=io.connect(location.protocol+"//"+location.hostname+":"+(parseInt(location.port)+1))).on("config-update",function(e){u=e,y=null,null,T()}),p.on("tree-update",function(e){d=e,j()}),p.on("update-finish",function(){I&&clearTimeout(I);var e=Math.max(0,100-Date.now()+A);e?I=setTimeout(function(){h.classList.remove("btn--disabled")},e):h.classList.remove("btn--disabled")})},e.src=location.protocol+"//"+location.hostname+":"+(parseInt(location.port)+1)+"/socket.io/socket.io.js",document.body.appendChild(e),window.addEventListener("keydown",function(e){(115==e.which&&e.ctrlKey||83==e.which&&e.metaKey)&&(e.preventDefault(),N())})};a=void 0,s=function(){a||(a=!0,H())},["interactive","complete"].indexOf(document.readyState)>=0?H():(a=!1,document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1))}]);